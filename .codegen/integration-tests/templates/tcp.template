// generated code - ** DO NOT EDIT **

package uhppoted

import (
    "net/netip"
    "reflect"
    "testing"

    test "github.com/uhppoted/uhppoted-lib-go/integration-tests"
    lib "github.com/uhppoted/uhppoted-lib-go/uhppoted"
)

{{ range $func := . }}{{ range $test := $func.Tests }}
func Test{{ titleCase $test.Name }}(t *testing.T) {
{{- range $arg := $test.Args }}{{ if eq $arg.Name "controller"}}
      controller := lib.Controller{
                        ID: {{ testarg $arg }},
                        Address:  netip.MustParseAddrPort("127.0.0.1:50003"),
                        Protocol: "tcp",
                     }{{ end }}
{{ end }}
{{- range $arg := $test.Args }}{{ if ne $arg.Name "controller"}}      {{ camelCase $arg.Name }} := {{ testarg $arg }}{{ end }}
{{ end }}
    response, err := lib.{{ titleCase $func.Name }}(u{{ range $arg := $test.Args }}, {{ camelCase $arg.Name }}{{end }}, timeout)

    if err != nil {
        t.Fatalf("%v", err)
    } else if !reflect.DeepEqual(response, test.Expected.{{ titleCase $test.Name }}) {
        t.Errorf("incorrect response\n   expected:%#v\n   got:     %#v", test.Expected.{{ titleCase $test.Name }}, response)
    }
}
{{ end }}{{ end }}
